# トラブルシューティング: `Prompt is too long` エラー（Documentation Phase）

## 症状
- ドキュメントフェーズ実行時に `Prompt is too long` と表示され、処理が中断または自動リトライになる
- Claudeへの送信前にコンテキストの要約が強制的にカットされ、指示が欠落する

## 主な原因
- CLAUDE.md（リポジトリルート）や `~/.claude/CLAUDE.md` が自動コンテキストに含まれているにもかかわらず、Read ツールで再読み込みしている
- 一度に3-5ファイル以上をReadし、コンテキスト上限を圧迫している
- 大きなファイルを `limit: 1000-2000` で部分読み込みせずに全文Readしている

## 対処法
1. まず自動的に含まれるファイル（`CLAUDE.md` / `~/.claude/CLAUDE.md`）をReadしないことを確認する
2. Readする対象を重要度の高いものから **1-2ファイルずつ** に絞り、上限でも **3-5ファイル** までに制限する
3. 大きなファイルは必ず `limit: 1000-2000` を指定し、必要箇所だけを部分読み込みする
4. 既にReadしたファイルを再読込しないようメモを残す

## 予防策
- ドキュメント更新前に対象候補を列挙し、Read回数を計画する
- Readしたファイル名とlimitを都度記録し、重複Readを防ぐ
- プロンプト長が増えたら不要なコンテキストを削減し、段階的に処理を進める
