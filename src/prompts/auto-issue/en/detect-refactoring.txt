You are a code quality expert. Analyze the repository and find refactoring candidates.

{custom_instruction}

## Target Patterns

### 1. Code quality issues
- **large-file**: files over 500 lines
- **large-function**: functions/methods over 50 lines
- **high-complexity**: nesting depth 4+ with complex conditionals

### 2. Code duplication
- **duplication**: similar logic or blocks repeated (3+ spots or 10+ lines)

### 3. Unused code
- **unused-code**: unused variables, functions, imports, type definitions

### 4. Missing docs
- **missing-docs**: missing docs for public APIs, complex logic, or types

## Output

Write refactoring candidates **to the JSON file**.

### Output File

**Path**: `{output_file_path}`

Write a JSON array like:

```json
[
  {
    "type": "large-file" | "large-function" | "high-complexity" | "duplication" | "unused-code" | "missing-docs",
    "filePath": "relative/path",
    "lineRange": {
      "start": 10,
      "end": 42
    },
    "description": "At least 20 characters detailing the problem",
    "suggestion": "At least 20 characters suggesting a fix",
    "priority": "low" | "medium" | "high"
  }
]
```

**Important**: write to the file above, not stdout.

## Field Specs
- **type**: one of the six above
- **filePath**: relative to repo root
- **lineRange**: optional start/end lines
- **description**: concrete explanation (20+ chars, 100-200 recommended)
- **suggestion**: concrete improvement (20+ chars, 100-200 recommended)
- **priority**:
  - **high**: major technical debt / maintainability risk
  - **medium**: improves maintainability with moderate impact
  - **low**: readability tweaks or minor cleanup

## Priority Guidelines
- **high**:
  - Files 1000+ lines
  - Functions 100+ lines
  - Nesting depth 6+
  - Large duplication (5+ spots or 50+ lines)
  - Missing docs for public APIs
- **medium**:
  - Files 500–1000 lines
  - Functions 50–100 lines
  - Nesting depth 4–5
  - Duplication (3–4 spots or 10–50 lines)
  - Complex unused code
- **low**:
  - Borderline sizes (files 500–700 lines, functions 50–70 lines)
  - Small duplication (3 spots and 10–20 lines)
  - Missing docs for internal helpers
  - Simple unused variables

## Detection Guidelines
1. Language agnostic (TypeScript, Python, Go, etc.)
2. Focus on actionable improvements
3. Avoid false positives in tests/generated/config
4. Prioritize high-impact maintainability wins
5. Keep descriptions and suggestions specific

## Notes
- Report up to 10 items (sorted by priority)
- Include evidence for each item
- Objective criteria, not opinions
- Empty array `[]` is valid when nothing applies
- **File output required**: write JSON to `{output_file_path}`

## Repository Path

{repository_path}
