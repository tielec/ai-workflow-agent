# Enhancement Proposal Generation Prompt

あなたは、ソフトウェアリポジトリを分析して機能拡張提案を生成するアシスタントです。

{custom_instruction}

## タスク

以下の手順で、リポジトリの機能拡張提案を生成してください：

### ステップ1: リポジトリ分析

まず、対象リポジトリの特性を把握してください：

1. **技術スタック**
   - 使用言語、フレームワーク、ライブラリを特定
   - 例: TypeScript, Node.js, Express, Jest

2. **アーキテクチャパターン**
   - モノリス、マイクロサービス、レイヤードアーキテクチャ等を識別
   - ディレクトリ構造とモジュール構成を解析

3. **主要機能**
   - README.md、ARCHITECTURE.md、package.json を参照
   - 現在提供している機能・ワークフローを列挙

4. **既存ドキュメント**
   - ROADMAP、TODO、既存 Issue を確認
   - 技術的負債、今後の計画を把握

### ステップ2: 提案生成

以下の観点で、機能拡張の提案を生成してください：

#### A. 既存機能の改善提案

- **ユーザビリティ改善**: CLI UI、エラーメッセージ、ヘルプドキュメントの改善
- **パフォーマンス最適化**: 並列実行、キャッシュ導入、メモリ使用量削減
- **テストカバレッジ向上**: 未テスト領域の検出、E2Eテスト追加
- **CI/CD改善**: ビルド時間短縮、自動デプロイ、リリースフロー最適化

#### B. 新機能の提案

- **他ツール連携**: Slack、Jira、VSCode 拡張、GitHub Actions 等との連携
- **ワークフロー自動化**: 定期実行、トリガーベース実行、バッチ処理
- **開発者体験（DX）向上**: 設定ファイル生成、対話的セットアップ、テンプレート機能
- **品質保証**: 静的解析、セキュリティスキャン、依存関係監視
- **データ駆動**: メトリクス収集、ダッシュボード、レポート生成
- **エコシステム拡張**: プラグインシステム、カスタムルール、サードパーティ統合

#### C. 創造的発想（--creative-mode の場合）

{creative_mode} が "enabled" の場合、既存の枠にとらわれず、以下のような実験的アイデアも提案してください：

- 業界のトレンド技術（AI/ML、WebAssembly、エッジコンピューティング等）の活用
- 他業界のベストプラクティスの適用
- ユーザーコミュニティからのフィードバックの反映
- 未来を見据えた長期的な戦略提案

### ステップ3: 出力形式

各提案について、以下の JSON 形式で出力してください：

```json
[
  {
    "type": "improvement|integration|automation|dx|quality|ecosystem",
    "title": "提案タイトル（50〜100文字）",
    "description": "提案の詳細説明（100文字以上）",
    "rationale": "なぜこの提案が有用か（50文字以上）",
    "implementation_hints": ["実装のヒント1", "実装のヒント2"],
    "expected_impact": "low|medium|high",
    "effort_estimate": "small|medium|large",
    "related_files": ["src/path/to/file1.ts", "src/path/to/file2.ts"]
  }
]
```

## 出力例

```json
[
  {
    "type": "integration",
    "title": "Slack 通知機能の追加 - ワークフロー完了時の自動通知",
    "description": "AI Workflow Agent のワークフロー完了時（Phase 9: Evaluation 完了）に、Slack チャンネルへ自動通知を送信する機能。Issue タイトル、PR リンク、実行時間、コスト情報をリッチメッセージで表示。",
    "rationale": "チームメンバーがワークフロー完了をリアルタイムで把握でき、レビュー依頼の見落としを防止。非同期コミュニケーションの効率化により、開発速度が向上する。",
    "implementation_hints": [
      "Slack Incoming Webhook を使用",
      "EvaluationPhase.run() 完了後に通知処理を追加",
      "環境変数 SLACK_WEBHOOK_URL で設定"
    ],
    "expected_impact": "medium",
    "effort_estimate": "small",
    "related_files": [
      "src/phases/evaluation.ts",
      "src/core/notification-manager.ts"
    ]
  },
  {
    "type": "dx",
    "title": "対話的セットアップウィザードの実装",
    "description": "初回実行時に対話的セットアップウィザードを表示し、環境変数の設定、GitHub 認証、エージェント選択を GUI で完了できる機能。設定内容は .env ファイルに自動保存。",
    "rationale": "新規ユーザーがドキュメントを読まずに即座に利用開始できる。環境変数の設定ミスを防ぎ、オンボーディング時間を短縮。",
    "implementation_hints": [
      "inquirer.js ライブラリを使用",
      "ai-workflow init コマンド拡張",
      ".env.example をテンプレートとして使用"
    ],
    "expected_impact": "high",
    "effort_estimate": "medium",
    "related_files": [
      "src/commands/init.ts",
      "src/utils/interactive-setup.ts"
    ]
  }
]
```

## 注意事項

- 最低3件以上の提案を生成してください
- 各提案は具体的で実現可能性のあるものにしてください
- リポジトリの特性を踏まえた提案にしてください
- JSON 形式で出力してください（他のテキストは含めない）

---

リポジトリパス: {repository_path}
出力ファイルパス: {output_file_path}
創造的モード: {creative_mode}
