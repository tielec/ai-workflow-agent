# レポート作成フェーズ - 修正プロンプト

**重要: すべてのドキュメント内容を日本語で記述してください。すべてのセクション、説明、解説は日本語で書いてください。**

## ⚠️ 必須タスク
**レポートの更新は最優先です。**
Write ツールまたは Edit ツールを使用して `.ai-workflow/issue-{issue_number}/09_report/output/report.md` を**上書き保存**し、最新のレポートのみを残してください。ファイルが存在しない場合は Write ツールで新規作成してください。

---

## タスク概要
レビューで指摘された問題を修正し、最終レポートを改善してください。

## レビュー結果
{review_feedback}

## 前回の実行ログ（参考）

以下は前回の実行ログの一部です。レポート内容がログに含まれている場合は、それを使用してファイルを作成できます：

```
{previous_log_snippet}
```

## 参考情報

### 現在のレポート
{report_document_path}

### 各フェーズ成果物
- Phase 1 (Requirements): {requirements_context}
- Phase 2 (Design): {design_context}
- Phase 3 (Test Scenario): {test_scenario_context}
- Phase 4 (Implementation): {implementation_context}
- Phase 5 (Test Implementation): {test_implementation_context}
- Phase 7 (Testing): {testing_context}
- Phase 8 (Documentation): {documentation_context}

## 修正指示

### ケース A: レポートファイルが未作成の場合

前回の実行でファイルが作成されなかった場合、以下の手順で対応してください：

1. **前回のログからレポート内容を抽出**（ログにレポート内容が含まれている場合）
   - エグゼクティブサマリー、変更内容、マージチェックリスト、リスク評価などを抽出
   - 整形して report.md として保存

2. **新たにレポートを作成**（ログにレポート内容が不十分な場合）
   - 各フェーズ成果物を参照して簡潔にレポートを作成
   - 必須項目（エグゼクティブサマリー、変更内容、マージ推奨判定）を含める
   - Write ツールで report.md として保存

### ケース B: レビューフィードバックに基づく修正の場合

#### ブロッカー（BLOCKER）の解消

レビュー結果の「ブロッカー」セクションに記載された問題は、**マージ判断ができない重大な欠陥**です。

**対応必須**:
- エグゼクティブサマリーの欠落 → 追加
- マージ推奨判定の欠落 → 追加
- 実装内容の説明不足 → 詳細化
- リスク評価の欠落 → 追加
- テスト結果の欠落 → 追加

#### 改善提案（SUGGESTION）への対応

レビュー結果の「改善提案」セクションに記載された事項は、より良いレポートにするための提案です。

**対応推奨**（すべて対応する必要はない）:
- ビジネス価値の説明強化
- 技術的変更の詳細追加
- マージチェックリストの充実
- 次のステップの具体化
- フォーマットの改善

## 修正方針

### ⚠️ 最重要: レポートの上書き
Write または Edit ツールで `.ai-workflow/issue-{issue_number}/09_report/output/report.md` を最優先で更新してください。要点を簡潔に記載し、不要な追記は避けてください。

### 1. 必須情報の確認

以下の情報が必ず含まれているか確認してください：

**エグゼクティブサマリー**:
- 実装内容（1-2文）
- ビジネス価値
- 技術的変更
- リスク評価（高/中/低）
- マージ推奨（✅/⚠️/❌）

**変更内容の詳細**:
- Phase 1-6の重要情報抜粋
- 新規/修正ファイルのリスト
- テスト結果サマリー
- ドキュメント更新サマリー

**マージチェックリスト**:
- 機能要件
- テスト
- コード品質
- セキュリティ
- 運用面
- ドキュメント

**リスク評価と推奨事項**:
- 特定されたリスク
- リスク軽減策
- マージ推奨判定と理由

**次のステップ**:
- マージ後のアクション
- フォローアップタスク

### 2. 情報の正確性

各フェーズの成果物から情報を抽出する際、以下に注意してください：

- **Phase 1（要件）**: 機能要件、受け入れ基準、スコープ
- **Phase 2（設計）**: 実装戦略、テスト戦略、変更ファイル
- **Phase 3（テストシナリオ）**: 主要テストケース
- **Phase 4（実装）**: 実装内容、新規/修正ファイル
- **Phase 5（テスト）**: テスト結果、成功/失敗数
- **Phase 8（ドキュメント）**: 更新されたドキュメント、更新内容

### 3. 簡潔性と可読性

レポートは以下の原則に従ってください：

- **エグゼクティブサマリーは1ページ以内**
- **詳細は要点のみ抜粋**（全文コピーは不要）
- **マークダウンフォーマットで読みやすく**
- **箇条書きを活用**

### 4. 客観性

事実に基づいて記載してください：

- **感情的な表現を避ける**
- **データに基づく評価**（例: テスト成功率95%）
- **リスクを正直に記載**（隠さない）

## 修正手順（チェックリスト）
- [ ] 1. 必須情報と改善提案を整理する
- [ ] 2. 各フェーズ成果物の要点を抽出して記載する
- [ ] 3. レポート全体の構成と整合性を確認する
- [ ] 4. **Write/Edit ツールで `.ai-workflow/issue-{issue_number}/09_report/output/report.md` を上書き保存**（必須）
- [ ] 5. リスク・マージ判断・次ステップの記載を再確認する

## 修正後の確認事項

修正完了後、以下を確認してください：

1. **ブロッカーが解消されたか**
   - レビューで指摘されたすべてのブロッカーに対応したか

2. **品質ゲートを満たしているか**
   - [ ] 変更内容が要約されている
   - [ ] マージ判断に必要な情報が揃っている
   - [ ] 動作確認手順が記載されている

3. **レビュアーがマージ判断できるか**
   - このレポートだけでマージすべきか判断できるか

## レポート更新

Write または Edit ツールで `.ai-workflow/issue-{issue_number}/09_report/output/report.md` を**上書き保存**してください。

## 修正開始

上記を踏まえ、レビュー指摘事項に対応してレポートを改善してください。
